(this.webpackJsonpchat=this.webpackJsonpchat||[]).push([[0],{108:function(e,t,n){},109:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),c=n(10),a=n.n(c),l=n(6),s=n(57),u=n.n(s),i=n(8),E=function(){return Date().substring(16,24)},m=function(){return console.log("generated"),"hsl("+360*Math.random()+",100%,50%)"},g=function(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return"".concat(e()).concat(e(),"-").concat(e(),"-").concat(e(),"-").concat(e(),"-").concat(e()).concat(e()).concat(e())},f=function(e){var t=e.message;switch(t.type){case"AUTOMATED_MESSAGE":return o.a.createElement("div",{className:"messageElement"},o.a.createElement("span",{style:{color:t.color}},"<".concat(t.time," ").concat(t.user," ").concat(t.content,">")));case"PRIVATE_MESSAGE":return o.a.createElement("div",{className:"messageElement"},o.a.createElement("span",{style:{color:t.color}},"<".concat(t.time," Whisper from ").concat(t.user,">")),o.a.createElement("span",{className:"message-content"},t.content));default:return o.a.createElement("div",{className:"messageElement"},o.a.createElement("span",{style:{color:t.color}},"<".concat(t.time," ").concat(t.user,">")),o.a.createElement("span",{className:"message-content"},t.content))}},O=Object(i.b)((function(e){return{messageLog:e.messageLogReducer}}))((function(e){var t=e.messageLog;return Object(r.useEffect)((function(){var e=document.getElementById("messageLog");e.scrollTop=e.scrollHeight}),[t]),o.a.createElement("ul",{className:"messageLog",id:"messageLog"},t.map((function(e){return o.a.createElement(f,{key:g(),message:e})})))})),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MESSAGE":return t.value;default:return e}},d=function(e){return{type:"ADD_MESSAGE_TO_LOG",value:e}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MESSAGE_LOG":return t.value;case"ADD_MESSAGE_TO_LOG":return e.concat(t.value);default:return e}},v=n(116),b={setMessage:function(e){return{type:"SET_MESSAGE",value:e}},addMessageToLog:d},h=Object(i.b)((function(e){return{message:e.messageReducer,socket:e.socketReducer,user:e.userReducer}}),b)((function(e){var t=e.user,n=e.socket,r=e.message,c=e.setMessage,a=e.addMessageToLog;return o.a.createElement(v.a,{onSubmit:function(e){return function(e){if(e.preventDefault(),r){var o=E();console.log("user:",t),console.log("message:",r);var l={content:r,time:o,user:t.name,color:t.color};a(l),n.emit("SENT_MESSAGE",l),c("")}}(e)},className:"messagePrompt"},o.a.createElement(v.a.Group,null,o.a.createElement(v.a.Control,{type:"text",placeholder:"Send message",value:r,onChange:function(e){return function(e){c(e.target.value)}(e)}})))})),y=n(64),T=n(115),_=n(60),j=n(111),R=n(112);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return t.value;case"SET_USER_NAME":return w({},e,{name:t.value});default:return e}},L={setUserName:function(e){return{type:"SET_USER_NAME",value:e}}},D=Object(i.b)((function(e){return{socket:e.socketReducer,login:e.loginReducer,user:e.userReducer}}),L)((function(e){var t=e.socket,n=e.login,c=e.user,a=e.setUserName,l=Object(r.useState)(null),s=Object(y.a)(l,2),u=s[0],i=s[1];Object(r.useEffect)((function(){i(m())}),[]);var g=function(e){if(e.preventDefault(),c.name.length<1)console.log("2short");else{var n={time:E(),user:c.name,color:u};t.emit("SET_NAME_TAG",n)}};return o.a.createElement(T.a,{show:n.showLogin,size:"md","aria-labelledby":"contained-modal-title-vcenter",centered:!0},o.a.createElement(T.a.Header,null,o.a.createElement(T.a.Title,{id:"contained-modal-title-vcenter"},"Welcome to my chat application")),o.a.createElement(T.a.Body,null,o.a.createElement(v.a,{onSubmit:function(e){return g(e)}},o.a.createElement(v.a.Row,null,o.a.createElement(_.a,{md:7},o.a.createElement(v.a.Label,null,"Choose nametag"),o.a.createElement(v.a.Control,{type:"text",placeholder:"Enter tag",onChange:function(e){return function(e){a(e.target.value)}(e)}}),o.a.createElement(v.a.Text,{className:"text-muted"},"Tag must be unique")),o.a.createElement(v.a.Group,{as:_.a,md:3,controlId:"colorChoiceForm"},o.a.createElement(v.a.Label,null,"Current colour"),o.a.createElement(j.a,{style:{backgroundColor:u,borderColor:u},onClick:function(e){i(m())}},"Randomize"))),o.a.createElement(v.a.Row,{style:{paddingTop:"10px"}},o.a.createElement(_.a,null,o.a.createElement(j.a,{onClick:function(e){g(e)}},"Choose tag")))),o.a.createElement(R.a,{variant:"warning",show:n.showAlert},"Name already in use")))})),N=Object(i.b)((function(e){return{users:e.userListReducer}}))((function(e){return o.a.createElement("div",null,"Users connected: ",Object.keys(e.users).length,o.a.createElement("ul",null,Object.keys(e.users).map((function(e){return o.a.createElement("div",{key:e},e)}))))})),U=n(113),M=n(114),C=function(){return o.a.createElement("div",{className:"mainChat"},o.a.createElement(U.a,{style:{marginLeft:0,marginRight:0}},o.a.createElement(D,null),o.a.createElement(M.a,{style:{marginLeft:0,marginRight:0}},o.a.createElement(_.a,{style:{marginLeft:0,marginRight:0,paddingLeft:0,paddingRight:0}},o.a.createElement(O,null)),o.a.createElement(_.a,null,o.a.createElement(N,null))),o.a.createElement(M.a,null,o.a.createElement(_.a,null,o.a.createElement(h,null)),o.a.createElement(_.a,null))))};function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=function(e){return{type:"SET_SHOW_ALERT",value:e}},W=function(e){return{type:"SET_SHOW_LOGIN",value:e}},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{showLogin:!0,showAlert:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SHOW_ALERT":return G({},e,{showAlert:t.value});case"SET_SHOW_LOGIN":return G({},e,{showLogin:t.value});default:return e}};function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var V,F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n={};switch(t.type){case"SET_USER_LIST":return t.value;case"ADD_USER_TO_LIST":return console.log("action value",t.value),(n=B({},e))[t.value.user]=t.value,console.log("state:",n),n;case"REMOVE_USER_FROM_LIST":return console.log("action value",t.value),delete(n=B({},e))[t.value.user],console.log("state:",n),n;default:return e}},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SOCKET":return t.value;default:return e}},J=n(30);function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Q=(V={setSocket:function(e){return{type:"SET_SOCKET",value:e}},setUser:function(e){return{type:"SET_USER",value:e}},setShowAlert:I,setShowLogin:W,addMessageToLog:d},Object(l.a)(V,"setShowAlert",I),Object(l.a)(V,"setShowLogin",W),Object(l.a)(V,"setUserList",(function(e){return console.log("value:",e),{type:"SET_USER_LIST",value:e}})),Object(l.a)(V,"addUserToList",(function(e){return{type:"ADD_USER_TO_LIST",value:e}})),Object(l.a)(V,"removeUserFromList",(function(e){return{type:"REMOVE_USER_FROM_LIST",value:e}})),V),X=Object(i.b)(null,Q)((function(e){var t=e.setSocket,n=e.addMessageToLog,r=e.setShowAlert,c=e.setUser,a=e.setShowLogin,l=e.setUserList,s=e.addUserToList,i=e.removeUserFromList,E=u()(J.PORT);return E.on("popup",(function(e){console.log("hello: ",e)})),E.on("connection",(function(){console.log("client connected")})),E.on("connect_error",(function(e){console.log("client connect_error: ",e)})),E.on("connect_timeout",(function(e){console.log("client connect_timeout: ",e)})),console.log("socket:",E),console.log("WSPORT:",J.WSPORT),console.log("PORT:",J.PORT),E.on("BROADCAST_MESSAGE",(function(e){n(e)})),E.on("USER_TAKEN",(function(e){n(e)})),E.on("USERNAME_ACCEPTED",(function(e){console.log("user:",e),c({name:e.user,color:e.color}),a(!1),n(q({},e,{content:"Joined the chat!",type:"AUTOMATED_MESSAGE"})),s(e)})),E.on("USERNAME_TAKEN",(function(){r(!0),console.log("username taken")})),E.on("NEW_USER_CONNECTED",(function(e){console.log("new user connected:",e),s(e),n(q({},e,{content:"Joined the chat!",type:"AUTOMATED_MESSAGE"}))})),E.on("ACTIVE_USERS_ON_CONNECTION",(function(e){l(e)})),E.on("USER_DISCONNECTED",(function(e){console.log("disconnected user:",e),n(q({},e,{content:"Has left the chat!",type:"AUTOMATED_MESSAGE"})),i(e)})),t(E),o.a.createElement(C,null)})),Y=n(18),Z=n(62),$=Object(Y.c)({messageLogReducer:S,messageReducer:p,socketReducer:K,userReducer:A,loginReducer:H,userListReducer:F}),ee=Object(Y.d)($,Object(Y.a)(Z.a));n(107),n(108);a.a.render(o.a.createElement(i.a,{store:ee},o.a.createElement(X,null)),document.getElementById("root"))},30:function(e,t,n){var r=Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_HTTP_PORT:"http://localhost:4001/"}).REACT_APP_WEBSOCKET_PORT,o="http://localhost:4001/";o=Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_HTTP_PORT:"http://localhost:4001/"}).PORT,e.exports={WSPORT:r,PORT:o}},65:function(e,t,n){e.exports=n(109)},98:function(e,t){}},[[65,1,2]]]);
//# sourceMappingURL=main.59b1aac3.chunk.js.map