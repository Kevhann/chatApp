(this.webpackJsonpchat=this.webpackJsonpchat||[]).push([[0],{10:function(e,t,n){var o=Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_HTTP_PORT:"http://localhost:4001/"}).REACT_APP_WEBSOCKET_PORT,c="http://localhost:4001/";c=Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_HTTP_PORT:"http://localhost:4001/"}).PORT,e.exports={WSPORT:o,PORT:c}},39:function(e,t,n){e.exports=n(81)},72:function(e,t){},80:function(e,t,n){},81:function(e,t,n){"use strict";n.r(t);var o=n(0),c=n.n(o),a=n(9),r=n.n(a),s=n(35),u=n.n(s),l=function(e){return{type:"ADD_MESSAGE_TO_LOG",value:e}},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MESSAGE_LOG":return t.value;case"ADD_MESSAGE_TO_LOG":return e.concat(t.value);default:return e}},E=n(1),g=function(){return Date().substring(16,24)},m=function(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return"".concat(e()).concat(e(),"-").concat(e(),"-").concat(e(),"-").concat(e(),"-").concat(e()).concat(e()).concat(e())},f=function(e){var t=e.message;return"USER_JOIN"===t.type?c.a.createElement("div",{className:"messageElement"},c.a.createElement("span",{style:{color:t.color}},"<".concat(t.time," ").concat(t.from," ").concat(t.content,">"))):c.a.createElement("div",{className:"messageElement"},c.a.createElement("span",{style:{color:t.color}},"<".concat(t.time," ").concat(t.from,">")),c.a.createElement("span",{className:"message-content"},t.content))},d={setMessageLog:function(e){return{type:"SET_MESSAGE_LOG",value:e}}},S=Object(E.b)((function(e){return{messageLog:e.messageLogReducer}}),d)((function(e){var t=e.messageLog;e.setMessageLog;return c.a.createElement("ul",{className:"messageLog"},t.map((function(e){return c.a.createElement(f,{key:m(),message:e})})))})),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MESSAGE":return t.value;default:return e}},T={setMessage:function(e){return{type:"SET_MESSAGE",value:e}},addMessageToLog:l},_=Object(E.b)((function(e){return{message:e.messageReducer,socket:e.socketReducer,user:e.userReducer}}),T)((function(e){var t=e.user,n=e.socket,o=e.message,a=e.setMessage,r=e.addMessageToLog;return c.a.createElement("div",null,c.a.createElement("form",null,c.a.createElement("input",{placeholder:"Send message",autoFocus:!0,type:"text",value:o,onChange:function(e){a(e.target.value)}}),c.a.createElement("button",{onClick:function(e){return function(e){if(e.preventDefault(),o){var c=g();console.log("user:",t),console.log("message:",o);var s={content:o,time:c,from:t.name,color:t.color};r(s),n.emit("SENT_MESSAGE",s),a("")}}(e)}},"send")))})),p=function(e){return{type:"SET_USER",value:e}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return t.value;default:return e}},O={setUser:p,addMessageToLog:l},R=Object(E.b)((function(e){return{user:e.userReducer,socket:e.socketReducer}}),O)((function(e){e.user;var t=e.socket,n=e.setUser,o=e.addMessageToLog,a="hsl("+360*Math.random()+",100%,50%)",r="";t.on("USER_CONNECTED",(function(e){console.log("user:",e),n({name:e.from,color:e.color}),o(e)}));return c.a.createElement("div",null,c.a.createElement("form",{onSubmit:function(e){return function(e){if(e.preventDefault(),r.length<1)console.log("2short");else{var n={content:"Joined the chat",time:g(),type:"USER_JOIN",from:r,color:a};t.emit("SET_NAME_TAG",n)}}(e)}},c.a.createElement("input",{placeholder:"Set nametag",onChange:function(e){return function(e){r=e.target.value}(e)},type:"text"})))})),L=Object(E.b)((function(e){return{user:e.userReducer}}))((function(e){var t=e.user;return c.a.createElement("div",{className:"mainChat"},c.a.createElement(S,{class:"messageLog"}),t?c.a.createElement(_,null):c.a.createElement(R,null))})),b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SOCKET":return t.value;default:return e}},A=n(10),M={setSocket:function(e){return{type:"SET_SOCKET",value:e}},addMessageToLog:l,setUser:p},P=Object(E.b)(null,M)((function(e){e.setUser;var t=e.setSocket,n=e.addMessageToLog,o=u()(A.PORT);return o.on("popup",(function(e){console.log("hello: ",e)})),o.on("connection",(function(){console.log("client connected")})),o.on("connect_error",(function(e){console.log("client connect_error: ",e)})),o.on("connect_timeout",(function(e){console.log("client connect_timeout: ",e)})),console.log("socket:",o),console.log("WSPORT:",A.WSPORT),console.log("PORT:",A.PORT),o.on("BROADCAST_MESSAGE",(function(e){n(e)})),o.on("USER_TAKEN",(function(e){n(e)})),t(o),c.a.createElement(L,null)})),y=n(6),N=n(37),C=Object(y.c)({messageLogReducer:i,messageReducer:v,socketReducer:b,userReducer:h}),k=Object(y.d)(C,Object(y.a)(N.a));n(79),n(80);r.a.render(c.a.createElement(E.a,{store:k},c.a.createElement(P,null)),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.bea942e7.chunk.js.map